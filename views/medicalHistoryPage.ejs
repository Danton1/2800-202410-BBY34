<%- include("templates/headerTemplate")%>
<div class="max-w-[450px] w-full min-h-svh mx-auto px-[35px] py-[50px] pb-[100px] bg-gray-900 flex flex-col items-center space-y-5 text-sky-100 text-md font-medium">
    <!-- Page title -->
    <h1 class="text-sky-300 text-3xl font-bold mb-5">Medical History</h1>

    <!-- List of Medications -->
    <div class="w-full bg-gray-700 shadow-lg py-5 px-5 flex flex-col rounded-2xl">
        <h1 id="medication" class="w-full flex justify-between items-center cursor-pointer">
            Medications 
            <i id="medicationTitle" class="fa-solid fa-chevron-down duration-200"></i>
        </h1>
        <ul id="medications" class="w-full h-0 overflow-hidden flex flex-col space-y-3 duration-300">
            <% user.medications.forEach(function(medication) { %>
                <li class="w-full bg-gray-800 py-3 px-4 rounded-xl">
                    <%= medication %>
                </li>
            <% }) %>
            <form action="/profile/medHistory/addMedication" method="POST" class="w-full">
                <input type="text" name="medication" placeholder="New Medication" class="w-full bg-gray-800 py-3 px-4 rounded-xl text-gray-900 mb-3">
                <button type="submit" class="w-full bg-sky-400 py-3 rounded-xl text-gray-900 font-extrabold hover:bg-sky-300 duration-200">
                    <i class="fa-solid fa-plus"></i> ADD
                </button>
            </form>
        </ul>
    </div>

    <!-- List of Illnesses -->
    <div class="w-full bg-gray-700 shadow-lg py-5 px-5 flex flex-col rounded-2xl">
        <h1 id="illness" class="w-full flex justify-between items-center cursor-pointer">
            Illnesses 
            <i id="illnessTitle" class="fa-solid fa-chevron-down duration-200"></i>
        </h1>
        <ul id="illnesses" class="w-full h-0 overflow-hidden flex flex-col space-y-3 duration-300">
            <% user.illnesses.forEach(function(illness) { %>
                <li class="w-full bg-gray-800 py-3 px-4 rounded-xl">
                    <%= illness %>
                </li>
            <% }) %>
            <form action="/profile/medHistory/addIllness" method="POST" class="w-full">
                <input type="text" name="illness" placeholder="New Illness" class="w-full bg-gray-800 py-3 px-4 rounded-xl text-gray-900 mb-3">
                <button type="submit" class="w-full bg-sky-400 py-3 rounded-xl text-gray-900 font-extrabold hover:bg-sky-300 duration-200">
                    <i class="fa-solid fa-plus"></i> ADD
                </button>
            </form>
        </ul>
    </div>

    <!-- List of Allergies -->
 <div class="w-full bg-gray-700 shadow-lg py-5 px-5 flex flex-col rounded-2xl">
        <h1 id="allergy" class="w-full flex justify-between items-center cursor-pointer">
            Allergies 
            <i id="allergyTitle" class="fa-solid fa-chevron-down duration-200"></i>
        </h1>
        <ul id="allergies" class="w-full h-0 overflow-hidden flex flex-col space-y-3 duration-300">
            <% user.allergies.forEach(function(allergy) { %>
                <li class="w-full bg-gray-800 py-3 px-4 rounded-xl">
                    <%= allergy %>
                </li>
            <% }) %>
            <form action="/profile/medHistory/addAllergy" method="POST" class="w-full">
                <input type="text" name="allergy" placeholder="New Allergy" class="w-full bg-gray-800 py-3 px-4 rounded-xl text-gray-900 mb-3">
                <button type="submit" class="w-full bg-sky-400 py-3 rounded-xl text-gray-900 font-extrabold hover:bg-sky-300 duration-200">
                    <i class="fa-solid fa-plus"></i> ADD
                </button>
            </form>
        </ul>
    </div>

</div>

</div>

<script>
    document.getElementById("medication").onclick = function() {
        var element = document.getElementById("medications");
        var icon = document.getElementById("medicationTitle");
        if (element.classList.contains("h-0")) {
            element.classList.remove("h-0");
            element.classList.add("mt-4");
            icon.classList.add("rotate-180");
        } else {
            element.classList.add("h-0");
            element.classList.remove("mt-4");
            icon.classList.remove("rotate-180");
        }
    };
    document.getElementById("illness").onclick = function(){
        var element = document.getElementById("illnesses");
        var icon = document.getElementById("illnessTitle");
        if (element.classList.contains("h-0")) {
            element.classList.remove("h-0");
            element.classList.add("mt-4");
            icon.classList.add("rotate-180");
        } else {
            element.classList.add("h-0");
            element.classList.remove("mt-4");
            icon.classList.remove("rotate-180");
        }
    }

    document.getElementById("allergy").onclick = function(){
        var element = document.getElementById("allergies");
        var icon = document.getElementById("allergyTitle");
        if (element.classList.contains("h-0")) {
            element.classList.remove("h-0");
            element.classList.add("mt-4");
            icon.classList.add("rotate-180");
        } else {
            element.classList.add("h-0");
            element.classList.remove("mt-4");
            icon.classList.remove("rotate-180");
        }
    }
</script>
<%- include("templates/footerTemplate")%>
